async function fetchData() {
  const number = document.getElementById("number").value.trim();
  const responseBox = document.getElementById("responseBox");
  const shareButton = document.getElementById("shareButton");

  if (!number) {
    alert("Please enter a phone number.");
    return;
  }

  const url = `https://api.allorigins.win/get?url=${encodeURIComponent(`https://fam-official.serv00.net/sim/api.php?num=${number}`)}`;

  try {
    const res = await fetch(url);
    const json = await res.json();
    const apiData = JSON.parse(json.contents);

    if (apiData.status === "success" && Array.isArray(apiData.data) && apiData.data.length > 0) {
      const user = apiData.data[0];
      const content = `
📞 Mobile: ${user.Mobile || "Not found"}
👤 Name: ${user.Name || "Not found"}
🆔 CNIC: ${user.CNIC || "Not found"}
📍 Address: ${user.Address || "Not found"}
📶 Operator: ${user.Operator || "Not found"}
      `;
      responseBox.innerText = content;
      responseBox.style.display = "block";
      shareButton.style.display = "inline-block";
    } else {
      responseBox.innerHTML = `<p style="color: yellow;">Data Not Found</p>`;
      responseBox.style.display = "block";
      shareButton.style.display = "none";
    }
  } catch (e) {
    responseBox.innerHTML = `<p style="color: red;">Error fetching data.</p>`;
    responseBox.style.display = "block";
    shareButton.style.display = "none";
  }
}

function shareWhatsApp() {
  const responseBox = document.getElementById("responseBox");
  const text = encodeURIComponent(responseBox.innerText);
  const url = `https://wa.me/?text=${text}`;
  window.open(url, '_blank');
}
